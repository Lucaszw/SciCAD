<!DOCTYPE html>
<html style="height:100%;">
  <head>
    <meta charset="UTF-8">
    <title>MicroDrop</title>
  </head>
  <body style="height:100%; overflow:hidden;">
    <script>
      // You can also require other files to run in this process
      const {ipcRenderer} = require('electron');
      const yo = require('yo-yo');

      ipcRenderer.on('ready', (e, data) => {
        var ports = JSON.parse(data).ports;
        const content = yo`<div style="height:100%"></div>`;

        const switchView = (tab) => {
          content.innerHTML = '';
          const view = yo`
            <webview src="http://localhost:${ports.http_port}/${tab}"
            style="
            top: 0px;
            width: 100%;
            height: 100%;
            margin: 0px;
            left: 0px;
            z-index: -1;
            ">
            </webview>
          `;
          content.appendChild(view);
        }

        const view = yo`
          <div style="height:100%;">
            <div id='header' style='text-align: center; padding-bottom: 7px;' >
              <button onclick=${switchView.bind(this, 'display')} >Display</button>
              <button onclick=${switchView.bind(this, 'ui-plugins')}>UI Plugins</button>
              <button onclick=${switchView.bind(this, 'process-plugins')}>Process Plugins</button>
            </div>
            ${content}
          </div>
        `;

        // const view = yo`
        //   <webview src="http://localhost:${ports.http_port}/display"
        //   style="position: fixed; top:0px; left: 0px; width:100%; height:100%">
        //   </webview>
        // `;

        // const view = yo`
        //   <webview src="http://localhost:${ports.http_port}/plugin-manager"
        //   style="position: fixed; top:0px; left: 0px; width:100%; height:100%">
        //   </webview>
        // `;

        document.body.appendChild(view);
        switchView('display')
      });

    </script>
  </body>
</html>
